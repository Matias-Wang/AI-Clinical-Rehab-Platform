# 臨床復健動作辨識專案：前置開發歷程紀錄
## 🟢 Day 1：數據源探索與環境建置核心目的： 
確認數據的「解析度」與「物理意義」，奠定模型觀察世界的基礎。
- 數據來源：採用 MHEALTH 穿戴式感測器數據集，包含 10 位受試者的多種復健動作。
- 採樣頻率：系統以 50Hz 頻率運作，即每 0.02 秒產生一筆三軸加速度數據。
- 特徵定位：確立左腳踝（Left Ankle）加速度計索引，作為後續步態辨識的核心特徵。

## 🟢 Day 2：物理特徵建模與量值化核心目的： 
透過數學轉換，解決感測器配戴方向不一導致的誤差（旋轉不變性）。
- 數學邏輯：計算三軸加速度合成向量（Magnitude），公式為：$$Acc_{mag} = \sqrt{x^2 + y^2 + z^2}$$
- 基準標竿：定義物理常數基準。在靜止狀態下，合成量值應趨近於重力常數 $9.8 m/s^2$。

## 🟢 Day 3：臨床風險管理與自動化稽核核心目的： 
符合 ISO 14971 醫療器材風險管理規範，建立「數據護欄」以防止欄位偏移。
- 風險分析 (ISO 14971)：
    + 情境：工程師誤讀索引（如誤將磁力計當作加速度計），導致數據暴增至 100+。
    + 危害：引發跌倒偵測的偽陽性（False Positive）警報，誤導臨床介入。
- 自動化稽核 (Sanity Checks)：
    + 靜止校準：Label 1 (Standing) 之均值必須落在 $9.0$ 至 $11.0 m/s^2$ 之間。
    + 物理極限：所有動作均值嚴禁超過 $50.0 m/s^2$（人體運動極限），超過則自動攔截。

## 🟢 Day 4：時序特徵切片 (Sliding Windows)
核心目的： 將連續數據流轉化為 AI 可讀取的「動作教材」，捕捉生理運動的律動規律。
- 視窗長度 (Window Size)：設定為 128 點（約 2.56 秒）。目的是確保每個樣本能包含 1.5 至 2 個完整的步態週期。
- 重疊率 (Overlap)：設定為 64 點 (50%)。確保動作轉折點不被切斷，並達成數據擴增（Data Augmentation）之效果。
- 標籤策略：採用眾數決 (Majority Vote) 判定該 2.56 秒內的代表動作，並剔除無意義的 Label 0 片段。

### 💡 戰略技術決策：為什麼選擇 1D-CNN 而非 LLM API？
本專案堅持在地化開發，其決策邏輯如下：
1. 隱私與合規：醫療生理數據不應離開本地，以符合 SaMD (Software as a Medical Device) 數據保護規範。
1. 即時性與延遲：感測器數據流量大，本地端 1D-CNN 可實現毫秒級反應，避免雲端 API 的網路延遲。
1. 特徵契合度：1D-CNN 擅長處理時序波形（Waveforms），相較於處理語言（Tokens）的 LLM 更具備物理直覺。


## 🟢 Day 5：開發日誌 (V1.0 Baseline)
### 1. 任務目標 (Mission Objective)
建立一維卷積神經網絡（1D-CNN）模型，作為臨床動作辨識的「大腦」，嘗試對 Day 4 切片完成的加速度訊號進行分類。

### 2. 模型架構設計 (Architecture Blueprint)
本專案採用 1D-CNN 結構，旨在自動提取感測器波形的時序特徵，避免手動計算特徵的誤差。
- 輸入規格 (Input Shape)：(128, 3)，代表 2.56 秒（128 點）的 50Hz 三軸加速度數據。
- 核心零件層級：
    1. 卷積層 (Conv1D)：使用 64 個濾波器進行波形掃描，自動識別步伐規律。
    1. 池化層 (MaxPooling)：進行訊號摘要，減少計算量並抓取最強訊號。
    1. 丟棄層 (Dropout)：設定 50% 比例，強迫模型學習通用規律而非死背數據。
    1. 全連接層 (Dense)：最後透過 Softmax 輸出 12 種動作的機率分布。
    1. 參數總數 (Total Params)：411,205 個可訓練參數。

### 3. 訓練配置與結果 (Training & Results)
- 優化器 (Optimizer)：Adam。
- 損失函數 (Loss Function)：Sparse Categorical Crossentropy。
- 訓練設定：50 Epochs (輪次), Batch size=32, Validation split = 20%。
- 初步結果 (Baseline V1.0)：
- 訓練集準確率：接近 100%。
- 驗證集準確率：接近 0%。
- 診斷結論：發生嚴重的過擬合 (Overfitting)。模型目前處於「死背訓練數據」而失去「推論未知數據」能力的狀態。

### 4. 預測驗證 (Sanity Test)
- 單一樣本測試：輸入 (1, 128, 3) 數據，模型輸出機率分布。
- 測試表現：對已知樣本預測準確率達 99.3%，證實模型「入水口」與「出水口」邏輯通暢，唯泛化能力尚待提升。

### 5. 法規與風險管理 (ISO 14971 & SaMD)
- 基準線建立：V1.0 模型雖然過擬合，但已完成「研發歷程紀錄（DHF）」的初步存檔，作為後續優化的對照基準。
- 數據隱私：堅持手寫 1D-CNN 而非串接外部 LLM API，是為了確保醫療生理數據能「本地化運算」，符合 SaMD 的數據隱私規範。

## 🟢 Day 6：對抗過擬合與 Dropout 機制
### 1. 核心問題診斷
在初始階段（V1.0 模型），面對單一受試者（Subject 1）的資料時，模型出現了嚴重的過擬合（Overfitting）現象。
    - 現象：訓練集準確率極高，但驗證集準確率低，且兩者曲線分叉嚴重。
    - 本質：模型參數過多，而資料量太少，導致模型在「死背」特定受試者的雜訊，而非學習動作的共通特徵。

### 2. 解決方案：Dropout 層
實作邏輯：在全連接層中加入 Dropout(0.5)。
    - 原理：在訓練過程中隨機關閉 50% 的神經元，強迫模型不能依賴特定的神經路徑。

### 3. 討論細節
Q：為什麼有時「驗證集準確率」會高於「訓練集」？<br>
A：因為訓練時有 Dropout（負重練習），而驗證時神經元全開（正式考試），這代表模型具備良好的泛化能力。

## 🟢 Day 7：模型架構精簡與輕量化 (V3.0)
架構優化邏輯：為了應對多受試者大數據，我們將模型進化到 V3.0：
- 參數變化：從 41 萬個參數縮減至約 13 萬個參數。
- 策略：透過減少卷積層的神經元數量，讓模型「變瘦」但更「精幹」。
- 目的：參數越少，模型越不容易死背雜訊，這在處理跨人體的差異時至關重要。

## 🟢 Day 8：全自動化大數據處理與臨床診斷
### 1. 多受試者數據合體 (Big Data Pipeline)
- 核心行動：整合 MHEALTH 資料集中 10 個受試者資料。
- 關鍵邏輯：
    1. 自動化檢索：遍歷所有檔案並過濾標籤 0 (無動作) 的無效數據。
    1. 切割資訊 (Windowing)：將連續數據切割成 (128, 3) 的三維矩陣。
    1. 數據合體：將多個受試者的局部矩陣合併，資料量躍升至 5255 筆。

### 2. 超參數深度討論：
- Batch Size = 32：符合二進位記憶體排列，運算快；提供足夠隨機性幫助模型跳出局部最小值。
- Epochs = 50：模型翻閱整份十人份數據的次數，達到 92% 以上的準確率。

### 3. 模型效能診斷 (Evaluation)
- 混淆矩陣 (Confusion Matrix) 診斷：
    * 主要混淆區域：AI 容易把「站立 (Stand)」誤判為「手臂前舉 (Arms)」，因為軀幹感測器在兩者間的加速度變化相似。

- 分類報告指標解讀：
    + Macro Avg：反映模型對每一個動作（不論資料多寡）的公平辨識度。
    + Weighted Avg：考量動作比例後的整體實力，反映臨床應用價值。

## 🟢 Day 9：📄 職涯發展與專案技術結案紀錄 (2026-02-22)
### 1. 專案技術總結：v3_1_multi 訊號分類
- 模型模型定位：從單人數據擴展至 10 人數據的 LiteCNN 架構，具備 Edge AI 部署潛力。
- 關鍵優化：
    * 診斷：原版本 Dropout 0.5 導致嚴重欠擬合（Validation > Training Accuracy）。
    * 行動：調降 Dropout 至 $0.2$，成功使模型收斂，Training Acc 提升至 $93\%$，Validation Acc 達 $91\%$。
- 遺留挑戰（由混淆矩陣揭露）：
    * 靜態辨識弱點：Stand 與 Sit 存在高度互偏（互為誤判），主因是加速度規在靜態下波形特徵過於接近。
    * 動態頻率干擾：Walk 與 Stairs 存在混淆，顯示單層 $CNN$ 對於垂直位移特徵的捕捉不足。

### 2. 職涯戰略定位：AI 產品架構師 (Target: 2M+ TWD)
- 目標產業：智慧醫療 (Smart Healthcare)、運動科技 (Sports Tech)。
- 核心競爭力組合：
    * 醫療背景：具備國泰醫院 PM 經驗，理解醫療現場流程與數位轉型痛點 。
    * 金融嚴謹性：目前任職於中信銀行 AI 產品架構師，擅長 AI Workflow 與多模型協作。
    * 技術儲備：統計學系背景提供強大實驗設計基礎，輔修 MLE 實作知識以應對 B 方案需求 。
- 專家路徑：不追求單純的調參（MLE），而是追求「問題定義 + 系統選型 + 法規合規」的架構師路徑。